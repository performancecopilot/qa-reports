key_server_node1_port=54321
__key_server_node1_pid=1912769
key_server_node2_port=54322
__key_server_node2_pid=1912785
key_server_node3_port=54323
__key_server_node3_pid=1912804
>>> Performing hash slots allocation on 3 nodes...
Master[0] -> Slots 0 - 5460
Master[1] -> Slots 5461 - 10922
Master[2] -> Slots 10923 - 16383
M: ebfeb29c7b126275bf19d26e26a1ab7aac1c4bdc 127.0.0.1:54321
   slots:[0-5460] (5461 slots) master
M: a71e16d441e431849a9efd8e1174433a8d5ba39d 127.0.0.1:54322
   slots:[5461-10922] (5462 slots) master
M: 42ec88c93cf9b4970b330525a737abfbd60fc22b 127.0.0.1:54323
   slots:[10923-16383] (5461 slots) master
Can I set the above configuration? (type 'yes' to accept): >>> Nodes configuration updated
>>> Assign a different config epoch to each node
>>> Sending CLUSTER MEET messages to join the cluster
Waiting for the cluster to join
.
>>> Performing Cluster Check (using node 127.0.0.1:54321)
M: ebfeb29c7b126275bf19d26e26a1ab7aac1c4bdc 127.0.0.1:54321
   slots:[0-5460] (5461 slots) master
M: a71e16d441e431849a9efd8e1174433a8d5ba39d 127.0.0.1:54322
   slots:[5461-10922] (5462 slots) master
M: 42ec88c93cf9b4970b330525a737abfbd60fc22b 127.0.0.1:54323
   slots:[10923-16383] (5461 slots) master
[OK] All nodes agree about slots configuration.
>>> Check for open slots...
>>> Check slots coverage...
[OK] All 16384 slots covered.
key_server_node1_port=54321
key_server_node2_port=54322
key_server_node3_port=54323
proxyport=54324
pmproxy_pid=1912839
connect: Connection refused
exit: 1
exit: 0
tcp        0      0 0.0.0.0:54321           0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:54323           0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:54322           0.0.0.0:*               LISTEN     
tcp6       0      0 [::]:54321              [::]:*                  LISTEN     
tcp6       0      0 [::]:54323              [::]:*                  LISTEN     
tcp6       0      0 [::]:54322              [::]:*                  LISTEN     
tcp6       0      0 [::]:54324              [::]:*                  LISTEN     
[pmproxy]
pcp.enabled = true
resp.enabled = true
[pmseries]
servers = localhost:54321,localhost:54322,localhost:54323
Log for pmproxy on runnervmwhb2z started Tue Oct 21 20:59:17 2025

[Tue Oct 21 20:59:17] pmproxy(1912839) Error: pmWebTimerSetMetricRegistry: server instrumentation disabled
[Tue Oct 21 20:59:17] pmproxy(1912839) Error: pmproxy: open_request_local - uv_pipe_bind /run/pcp/pmproxy.socket failed [EACCES]: permission denied
[Tue Oct 21 20:59:17] pmproxy(1912839) Error: pmproxy: open_request_port - uv_listen failed port=54324 [EADDRINUSE]: address already in use
pmproxy: PID = 1912839, PDU version = 2, user = pcpqa (995)
pmproxy request port(s):
  sts fd   port  family address
  === ==== ===== ====== =======
  err   -1       unix   /run/pcp/pmproxy.socket
  err   -1 54324 inet   INADDR_ANY
  ok    12 54324 ipv6   INADDR_ANY
[Tue Oct 21 20:59:17] pmproxy(1912839) Info: Key server slots, command keys setup
== all done

== Key server Node 1 keys:


== Key server Node 1 log:
1912769:C 21 Oct 2025 20:59:14.615 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
1912769:C 21 Oct 2025 20:59:14.615 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
1912769:C 21 Oct 2025 20:59:14.615 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
1912769:C 21 Oct 2025 20:59:14.615 * Valkey version=7.2.10, bits=64, commit=00000000, modified=0, pid=1912769, just started
1912769:C 21 Oct 2025 20:59:14.615 * Configuration loaded
1912769:M 21 Oct 2025 20:59:14.615 * monotonic clock: POSIX clock_gettime
1912769:M 21 Oct 2025 20:59:14.615 * Running mode=cluster, port=54321.
1912769:M 21 Oct 2025 20:59:14.615 * No cluster configuration found, I'm ebfeb29c7b126275bf19d26e26a1ab7aac1c4bdc
1912769:M 21 Oct 2025 20:59:14.617 * Server initialized
1912769:M 21 Oct 2025 20:59:14.617 * Ready to accept connections tcp
1912769:M 21 Oct 2025 20:59:15.450 * configEpoch set to 1 via CLUSTER SET-CONFIG-EPOCH
1912769:M 21 Oct 2025 20:59:15.478 * IP address for this node updated to 127.0.0.1
1912769:M 21 Oct 2025 20:59:16.625 * Cluster state changed: ok

== Key server Node 2 keys:


== Key server Node 2 log:
1912785:C 21 Oct 2025 20:59:14.891 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
1912785:C 21 Oct 2025 20:59:14.891 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
1912785:C 21 Oct 2025 20:59:14.891 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
1912785:C 21 Oct 2025 20:59:14.891 * Valkey version=7.2.10, bits=64, commit=00000000, modified=0, pid=1912785, just started
1912785:C 21 Oct 2025 20:59:14.891 * Configuration loaded
1912785:M 21 Oct 2025 20:59:14.892 * monotonic clock: POSIX clock_gettime
1912785:M 21 Oct 2025 20:59:14.892 * Running mode=cluster, port=54322.
1912785:M 21 Oct 2025 20:59:14.892 * No cluster configuration found, I'm a71e16d441e431849a9efd8e1174433a8d5ba39d
1912785:M 21 Oct 2025 20:59:14.893 * Server initialized
1912785:M 21 Oct 2025 20:59:14.893 * Ready to accept connections tcp
1912785:M 21 Oct 2025 20:59:15.450 * configEpoch set to 2 via CLUSTER SET-CONFIG-EPOCH
1912785:M 21 Oct 2025 20:59:15.521 * IP address for this node updated to 127.0.0.1
1912785:M 21 Oct 2025 20:59:15.521 * Successfully completed handshake with ebfeb29c7b126275bf19d26e26a1ab7aac1c4bdc ()
1912785:M 21 Oct 2025 20:59:16.902 * Cluster state changed: ok

== Key server Node 3 keys:


== Key server Node 3 log:
1912804:C 21 Oct 2025 20:59:15.175 # WARNING: Changing databases number from 16 to 1 since we are in cluster mode
1912804:C 21 Oct 2025 20:59:15.175 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
1912804:C 21 Oct 2025 20:59:15.175 * oO0OoO0OoO0Oo Valkey is starting oO0OoO0OoO0Oo
1912804:C 21 Oct 2025 20:59:15.175 * Valkey version=7.2.10, bits=64, commit=00000000, modified=0, pid=1912804, just started
1912804:C 21 Oct 2025 20:59:15.175 * Configuration loaded
1912804:M 21 Oct 2025 20:59:15.175 * monotonic clock: POSIX clock_gettime
1912804:M 21 Oct 2025 20:59:15.176 * Running mode=cluster, port=54323.
1912804:M 21 Oct 2025 20:59:15.176 * No cluster configuration found, I'm 42ec88c93cf9b4970b330525a737abfbd60fc22b
1912804:M 21 Oct 2025 20:59:15.177 * Server initialized
1912804:M 21 Oct 2025 20:59:15.177 * Ready to accept connections tcp
1912804:M 21 Oct 2025 20:59:15.451 * configEpoch set to 3 via CLUSTER SET-CONFIG-EPOCH
1912804:M 21 Oct 2025 20:59:15.521 * IP address for this node updated to 127.0.0.1
1912804:M 21 Oct 2025 20:59:15.521 * Successfully completed handshake with ebfeb29c7b126275bf19d26e26a1ab7aac1c4bdc ()
1912804:M 21 Oct 2025 20:59:17.185 * Cluster state changed: ok
