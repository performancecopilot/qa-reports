=== now Sat Feb  7 20:34:31 UTC 2026 ===
=== tmp.sed ===
s@/tmp/1429-1517458@TMP@g
s@/tmp/1429-1517458@TMP@g
s/20260207.01.10/NOW-0.1H.MM/g
s/20260207.01.10-00/NOW-0.1H.MM-00/g
s/20260207.01.10-01/NOW-0.1H.MM-01/g
s/20260207.04.10/NOW-0.4H.MM/g
s/20260207.04.10-00/NOW-0.4H.MM-00/g
s/20260207.04.10-01/NOW-0.4H.MM-01/g
s/20260207.16.10/NOW-0.16H.MM/g
s/20260207.16.10-00/NOW-0.16H.MM-00/g
s/20260207.16.10-01/NOW-0.16H.MM-01/g
s/20260206.01.10/NOW-1.1H.MM/g
s/20260206.01.10-00/NOW-1.1H.MM-00/g
s/20260206.01.10-01/NOW-1.1H.MM-01/g
s/20260205.01.10/NOW-2.1H.MM/g
s/20260205.01.10-00/NOW-2.1H.MM-00/g
s/20260205.01.10-01/NOW-2.1H.MM-01/g
s/20260204.01.10/NOW-3.1H.MM/g
s/20260204.01.10-00/NOW-3.1H.MM-00/g
s/20260204.01.10-01/NOW-3.1H.MM-01/g
s/NOW-0/TODAY/g
s/NOW-1/YESTERDAY/g
s/20260207/TODAY/g
s/20260206/YESTERDAY/g
s/20260205/DAYBEFOREYESTERDAY/g
s/2026/YYYY/g
s/2026/YYYY/g
s/-02-/-MM-/
s/-02-/-MM-/
s/-07/-TODAY/
s/-06/-YESTERDAY/
s/-05/-DAYBEFOREYESTERDAY/


=== autosave tests ===
--- destdir dir does not exist ---
pmlogger_daily: [/tmp/1429-1517458.control:3]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:3]
Warning: skipping log rotation because we don't know which pmlogger to signal
mkdir: cannot create directory '/no': Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:3]
Error: cannot create directory (/no/such/dir) for autosave
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:3]
Warning: 20260205: AUTOSAVE skipped: directory /no/such/dir does not exist
pmlogger_daily: [/tmp/1429-1517458.control:3]
Warning: 20260206: AUTOSAVE skipped: directory /no/such/dir does not exist
pmlogger_daily: [/tmp/1429-1517458.control:3]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:3]
Warning: skipping log rotation because we don't know which pmlogger to signal
mkdir: cannot create directory '/no': Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:3]
Error: cannot create directory (/no/such/dir) for autosave
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:3]
Warning: 20260205: AUTOSAVE skipped: directory /no/such/dir does not exist
pmlogger_daily: [/tmp/1429-1517458.control:3]
Warning: 20260206: AUTOSAVE skipped: directory /no/such/dir does not exist
20260205.0
20260205.index
20260205.meta
20260206.0
20260206.index
20260206.meta
20260207.01.10-00.0
20260207.01.10-00.index
20260207.01.10-00.meta
20260207.01.10-01.0
20260207.01.10-01.index
20260207.01.10-01.meta
20260207.01.10.0
20260207.01.10.index
20260207.01.10.meta
20260207.04.10-00.0
20260207.04.10-00.index
20260207.04.10-00.meta
20260207.04.10-01.0
20260207.04.10-01.index
20260207.04.10-01.meta
20260207.16.10-00.0
20260207.16.10-00.index
20260207.16.10-00.meta
20260207.16.10-01.0
20260207.16.10-01.index
20260207.16.10-01.meta
20260207.16.10.0
20260207.16.10.index
20260207.16.10.meta
config
--- cannot write in dest dir ---
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: $PCP_AUTOSAVE_DIR (/tmp/1429-1517458.nowrite) reset from control file, previous value (/no/such/file) ignored
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: skipping log rotation because we don't know which pmlogger to signal
pmlogmv: link /tmp/1429-1517458/20260205.0 -> /tmp/1429-1517458.nowrite/20260205.0 failed: Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: 20260205: AUTOSAVE failed
pmlogmv: link /tmp/1429-1517458/20260206.0 -> /tmp/1429-1517458.nowrite/20260206.0 failed: Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: 20260206: AUTOSAVE failed
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: $PCP_AUTOSAVE_DIR (/tmp/1429-1517458.nowrite) reset from control file, previous value (/no/such/file) ignored
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: skipping log rotation because we don't know which pmlogger to signal
pmlogmv: link /tmp/1429-1517458/20260205.0 -> /tmp/1429-1517458.nowrite/20260205.0 failed: Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: 20260205: AUTOSAVE failed
pmlogmv: link /tmp/1429-1517458/20260206.0 -> /tmp/1429-1517458.nowrite/20260206.0 failed: Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: 20260206: AUTOSAVE failed
20260205.0
20260205.index
20260205.meta
20260206.0
20260206.index
20260206.meta
20260207.01.10-00.0
20260207.01.10-00.index
20260207.01.10-00.meta
20260207.01.10-01.0
20260207.01.10-01.index
20260207.01.10-01.meta
20260207.01.10.0
20260207.01.10.index
20260207.01.10.meta
20260207.04.10-00.0
20260207.04.10-00.index
20260207.04.10-00.meta
20260207.04.10-01.0
20260207.04.10-01.index
20260207.04.10-01.meta
20260207.16.10-00.0
20260207.16.10-00.index
20260207.16.10-00.meta
20260207.16.10-01.0
20260207.16.10-01.index
20260207.16.10-01.meta
20260207.16.10.0
20260207.16.10.index
20260207.16.10.meta
config
--- dest dir ok ---
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: skipping log rotation because we don't know which pmlogger to signal
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: skipping log rotation because we don't know which pmlogger to signal
20260207.01.10-00.0
20260207.01.10-00.index
20260207.01.10-00.meta
20260207.01.10-01.0
20260207.01.10-01.index
20260207.01.10-01.meta
20260207.01.10.0
20260207.01.10.index
20260207.01.10.meta
20260207.04.10-00.0
20260207.04.10-00.index
20260207.04.10-00.meta
20260207.04.10-01.0
20260207.04.10-01.index
20260207.04.10-01.meta
20260207.16.10-00.0
20260207.16.10-00.index
20260207.16.10-00.meta
20260207.16.10-01.0
20260207.16.10-01.index
20260207.16.10-01.meta
20260207.16.10.0
20260207.16.10.index
20260207.16.10.meta
config
20260205.0
20260205.index
20260205.meta
20260206.0
20260206.index
20260206.meta
--- dest dir with DATEXX components does not exist ---
total 0
dr-xr-xr-x 2 pcp pcp 40 Feb  7 20:34 2026
total 0
dr-xr-xr-x 2 pcp pcp 40 Feb  7 20:34 2026
total 0
dr-xr-xr-x 2 pcp pcp 40 Feb  7 20:34 2026
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: skipping log rotation because we don't know which pmlogger to signal
mkdir: cannot create directory '/tmp/1429-1517458.ok/2026/2026-02-05/': Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: cannot create directory (/tmp/1429-1517458.ok/2026/2026-02-05/) for autosave
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: 20260205: AUTOSAVE skipped: directory /tmp/1429-1517458.ok/2026/2026-02-05/ does not exist
mkdir: cannot create directory '/tmp/1429-1517458.ok/2026/2026-02-06/': Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: cannot create directory (/tmp/1429-1517458.ok/2026/2026-02-06/) for autosave
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: 20260206: AUTOSAVE skipped: directory /tmp/1429-1517458.ok/2026/2026-02-06/ does not exist
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: skipping log rotation because we don't know which pmlogger to signal
mkdir: cannot create directory '/tmp/1429-1517458.ok/2026/2026-02-05/': Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: cannot create directory (/tmp/1429-1517458.ok/2026/2026-02-05/) for autosave
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: 20260205: AUTOSAVE skipped: directory /tmp/1429-1517458.ok/2026/2026-02-05/ does not exist
mkdir: cannot create directory '/tmp/1429-1517458.ok/2026/2026-02-06/': Permission denied
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: cannot create directory (/tmp/1429-1517458.ok/2026/2026-02-06/) for autosave
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: 20260206: AUTOSAVE skipped: directory /tmp/1429-1517458.ok/2026/2026-02-06/ does not exist
20260205.0
20260205.index
20260205.meta
20260206.0
20260206.index
20260206.meta
20260207.01.10-00.0
20260207.01.10-00.index
20260207.01.10-00.meta
20260207.01.10-01.0
20260207.01.10-01.index
20260207.01.10-01.meta
20260207.01.10.0
20260207.01.10.index
20260207.01.10.meta
20260207.04.10-00.0
20260207.04.10-00.index
20260207.04.10-00.meta
20260207.04.10-01.0
20260207.04.10-01.index
20260207.04.10-01.meta
20260207.16.10-00.0
20260207.16.10-00.index
20260207.16.10-00.meta
20260207.16.10-01.0
20260207.16.10-01.index
20260207.16.10-01.meta
20260207.16.10.0
20260207.16.10.index
20260207.16.10.meta
config
/tmp/1429-1517458.ok:
2026

/tmp/1429-1517458.ok/2026:
--- dest dir ok and with DATEXX components ---
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: skipping log rotation because we don't know which pmlogger to signal
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: creating directory (/tmp/1429-1517458.ok/2026/2026-02-05/) for autosave
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: creating directory (/tmp/1429-1517458.ok/2026/2026-02-06/) for autosave
pmlogger_daily: [/tmp/1429-1517458.control:4]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: skipping log rotation because we don't know which pmlogger to signal
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: creating directory (/tmp/1429-1517458.ok/2026/2026-02-05/) for autosave
pmlogger_daily: [/tmp/1429-1517458.control:4]
Warning: creating directory (/tmp/1429-1517458.ok/2026/2026-02-06/) for autosave
20260207.01.10-00.0
20260207.01.10-00.index
20260207.01.10-00.meta
20260207.01.10-01.0
20260207.01.10-01.index
20260207.01.10-01.meta
20260207.01.10.0
20260207.01.10.index
20260207.01.10.meta
20260207.04.10-00.0
20260207.04.10-00.index
20260207.04.10-00.meta
20260207.04.10-01.0
20260207.04.10-01.index
20260207.04.10-01.meta
20260207.16.10-00.0
20260207.16.10-00.index
20260207.16.10-00.meta
20260207.16.10-01.0
20260207.16.10-01.index
20260207.16.10-01.meta
20260207.16.10.0
20260207.16.10.index
20260207.16.10.meta
config
/tmp/1429-1517458.ok:
2026

/tmp/1429-1517458.ok/2026:
2026-02-05
2026-02-06

/tmp/1429-1517458.ok/2026/2026-02-05:
20260205.0
20260205.index
20260205.meta

/tmp/1429-1517458.ok/2026/2026-02-06:
20260206.0
20260206.index
20260206.meta

=== merge callback tests ===
pmlogger_daily: [/tmp/1429-1517458.control:6]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:6]
Warning: skipping log rotation because we don't know which pmlogger to signal

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "/tmp/1429-1517458/20260205"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "-m"
merge arg[2] "/tmp/1429-1517458/20260205"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "merge"
merge arg[2] "fumble"
merge arg[3] "/tmp/1429-1517458/20260205"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "-q"
merge arg[2] "blah fluff"
merge arg[3] "merge"
merge arg[4] "fumble"
merge arg[5] "/tmp/1429-1517458/20260205"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "/tmp/1429-1517458/20260206"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "-m"
merge arg[2] "/tmp/1429-1517458/20260206"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "merge"
merge arg[2] "fumble"
merge arg[3] "/tmp/1429-1517458/20260206"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "-q"
merge arg[2] "blah fluff"
merge arg[3] "merge"
merge arg[4] "fumble"
merge arg[5] "/tmp/1429-1517458/20260206"
pmlogger_daily: [/tmp/1429-1517458.control:6]
Error: no pmlogger instance running for host "local:"
... logging for host "local:" unchanged
pmlogger_daily: [/tmp/1429-1517458.control:6]
Warning: skipping log rotation because we don't know which pmlogger to signal

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "/tmp/1429-1517458/20260205"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "-m"
merge arg[2] "/tmp/1429-1517458/20260205"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "merge"
merge arg[2] "fumble"
merge arg[3] "/tmp/1429-1517458/20260205"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "-q"
merge arg[2] "blah fluff"
merge arg[3] "merge"
merge arg[4] "fumble"
merge arg[5] "/tmp/1429-1517458/20260205"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "/tmp/1429-1517458/20260206"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "-m"
merge arg[2] "/tmp/1429-1517458/20260206"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "merge"
merge arg[2] "fumble"
merge arg[3] "/tmp/1429-1517458/20260206"

merge arg[0] "/tmp/1429-1517458.merge"
merge arg[1] "-q"
merge arg[2] "blah fluff"
merge arg[3] "merge"
merge arg[4] "fumble"
merge arg[5] "/tmp/1429-1517458/20260206"

=== compress callback tests ===
pmcd Host            Archive           Class        PID State   
98872295d798         20260207.20.34-00 primary  1514600 running 
Warning: _get_pids_by_name: pid=1521639: unknown cgroup pattern: 0::/init.scope
UID          PID    PPID  C STIME TTY          TIME CMD
pcp      1521639       1  0 20:34 ?        00:00:00 /usr/lib/pcp/bin/pmlogger -h local: -d "/tmp/1429-1517458" -c ./config -m pmlogger_check %Y%m%d.%H.%M

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "/tmp/1429-1517458/20260205"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "-p"
compress arg[2] "blah fluff"
compress arg[3] "-q"
compress arg[4] "compress"
compress arg[5] "-r"
compress arg[6] "fumble"
compress arg[7] "/tmp/1429-1517458/20260205"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "compress"
compress arg[2] "fumble"
compress arg[3] "/tmp/1429-1517458/20260205"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "-c"
compress arg[2] "/tmp/1429-1517458/20260205"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "/tmp/1429-1517458/20260206"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "-p"
compress arg[2] "blah fluff"
compress arg[3] "-q"
compress arg[4] "compress"
compress arg[5] "-r"
compress arg[6] "fumble"
compress arg[7] "/tmp/1429-1517458/20260206"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "compress"
compress arg[2] "fumble"
compress arg[3] "/tmp/1429-1517458/20260206"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "-c"
compress arg[2] "/tmp/1429-1517458/20260206"
Warning: _get_pids_by_name: pid=1521639: unknown cgroup pattern: 0::/init.scope
UID          PID    PPID  C STIME TTY          TIME CMD
pcp      1521639       1  0 20:34 ?        00:00:00 /usr/lib/pcp/bin/pmlogger -h local: -d "/tmp/1429-1517458" -c ./config -m pmlogger_check %Y%m%d.%H.%M

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "/tmp/1429-1517458/20260205"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "-p"
compress arg[2] "blah fluff"
compress arg[3] "-q"
compress arg[4] "compress"
compress arg[5] "-r"
compress arg[6] "fumble"
compress arg[7] "/tmp/1429-1517458/20260205"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "compress"
compress arg[2] "fumble"
compress arg[3] "/tmp/1429-1517458/20260205"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "-c"
compress arg[2] "/tmp/1429-1517458/20260205"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "/tmp/1429-1517458/20260206"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "-p"
compress arg[2] "blah fluff"
compress arg[3] "-q"
compress arg[4] "compress"
compress arg[5] "-r"
compress arg[6] "fumble"
compress arg[7] "/tmp/1429-1517458/20260206"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "compress"
compress arg[2] "fumble"
compress arg[3] "/tmp/1429-1517458/20260206"

compress arg[0] "/tmp/1429-1517458.compress"
compress arg[1] "-c"
compress arg[2] "/tmp/1429-1517458/20260206"
_wait_for_pmlogger() success at iter 1 ...
Connected to primary pmlogger at local:
pmlogger [primary] on host local: is logging metrics from host 98872295d798
PMCD host        98872295d798
log started      Sat Feb  7 20:34:37.183343931 2026 (times in local time)
last log entry   Sat Feb  7 20:34:37.693244019 2026
current time     Sat Feb  7 20:34:38.698588281 2026
log volume       0
log size         75484
